<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ам-ням</title>
    <!-- подключение стилей -->

    <link rel="stylesheet" href="CreateRecipe.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous" />
    <link rel="stylesheet" href="/src/shared/css/main.css" />
    <!-- ПОДКЛЮЧЕНИЕ ТЕСТОВОГО ФАЙЛА -->
    <script type="module" src="/testCheck.js" defer></script>
</head>

<body>

    

    <!-- шапка сайта -->
    <header class="header">
        <!-- контейнер бутстрапа -->
        <div class="header__container container">
            <!-- лого -->
            <a href="index.html" class="logo">
                <img class="logo__img" src="/assets/images/logo.png" alt="logo" />
                <span class="logo__text">Ам-Ням</span>
            </a>

            <!-- поиск на странице -->
            <form class="search-form" role="search">
                <button class="search-form__btn">
                    <img class="search-form__img" src="/assets/images/search-img.svg" alt="" />
                </button>
                <input class="search-form__field" type="text" placeholder="Поиск" />
            </form>

            <!-- блок профиля (вход/личный кабинет) -->
            <a href="/src/pages/login/LoginPage.html">
                <div class="profile-block">
                    <button class="basic-btn" id="auth-btn">
                        <img class="basic-btn__img" src="/assets/images/person-img.svg" alt="person" />
                        <span class="basic-btn-text">Войти</span>
                    </button>
                    <!-- ТЕСТОВАЯ ЗАГЛУШКА ПОСЛЕ ВХОДА  -->
                    <!-- <h1 id="profile-ico">
                            hi
                        </h1> -->
                </div>
            </a>
        </div>
    </header>

    <h1> Создание рецепта </h1>
    <h2> Описание блюда </h2>
    <div class="form-right-panel">
        <input type="text" name="name" id="name" placeholder=" " required />
        <label for="name">Название блюда</label>
    </div>

    <div class="form-right-panel">
        <input type="text" name="short_description" id="short_description" placeholder=" " required />
        <label for="short_description">Краткое описание</label>
    </div>

    <label for="category">Категория блюда:</label>
<select id="category" name="category"></select>

<script>
  async function dataTry() {
    let token = localStorage.getItem("access_token");

    try {
      let response = await fetch('http://localhost:5232/api/Categories', {
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer " + token,
        },
      });

      if (!response.ok) {
        throw new Error(`Ошибка: ${response.status}`);
      }

      let data = await response.json();
      console.log(data); // для отладки

      // Заполнение select
      const select = document.getElementById("category");
      data.forEach(category => {
        const option = document.createElement("option");
        option.value = category.id;         // UUID из Supabase
        option.textContent = category.name; // Название категории
        select.appendChild(option);
      });

    } catch (err) {
      console.error("Ошибка при получении категорий:", err);
    }
  }

 dataTry();

//   window.onload = dataTry;

</script>



    <!-- тож подключение бутстрапа -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
</body>
</html>